<template>
    <div class="song">
        <song-lyric-part :part="part" v-for="(part, key) in json" :key="key" :style="{ fontSize: fontSizePercent + '%' }">
            <template v-slot:song-line="line_data">
                <song-line :line="line_data" :part="part" :class="{'song-line--newline': isSongLineNewline(line_data)}">
                    <template v-slot:song-part-tag="part_data">
                        <span class="song-part-tag">{{ getSongPartTag(part_data) }}&nbsp;</span>
                    </template>

                    <template v-slot:chord="chord_data">
                        <span class="chord">
                            <chord-sign :chord="transposed(chord_data.chord, getSongPartSharpness(part))" v-if="showChordSigns" :style="{ fontSize: chordFontSizePercent + '%' }"></chord-sign>
                            <span :class="['chord-text', !chord_data.chord.isDivided ? 'chord-text-spaced' : '']">{{ chord_data.chord.text }}</span>
                            <span class="chord-line" v-if="chord_data.chord.isDivided"></span>
                        </span>
                        <span v-if="!chord_data.chord.isDivided" class="chord">&nbsp;</span>
                    </template>
                </song-line>
            </template>
        </song-lyric-part>
    </div>
</template>

<script>
import SongLyricPart from './SongLyricPart';
import SongLine from './SongLine';
import ChordSign from './ChordSign';
import { transposedChord, getSongPartSharpness } from './transposer.js';

export default {
    components: { SongLyricPart, SongLine, ChordSign },

    data() {
        return {
            transposition: 1,
            fontSizePercent: 100,
            chordFontSizePercent: 100,
            showChordSigns: true,
            json_str:"[{\"type\":\"R\",\"isHidden\":false,\"isHiddenText\":false,\"isEmpty\":false,\"isVerse\":false,\"isRefrain\":true,\"isInline\":false,\"songLines\":[{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu uliye\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Mbinguni yetu, yetu, amina!\"}]},{\"chords\":[{\"base\":\"E\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu, uliye\"}]},{\"chords\":[{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Jina lako \"},{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"litukuzwe\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu uliye\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Mbinguni yetu, yetu, amina!\"}]},{\"chords\":[{\"base\":\"E\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu, uliye\"}]},{\"chords\":[{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Jina lako \"},{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"litukuzwe\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]}]},{\"type\":\"1\",\"isHidden\":false,\"isHiddenText\":false,\"isEmpty\":false,\"isVerse\":true,\"isRefrain\":false,\"isInline\":false,\"songLines\":[{\"chords\":[{\"base\":\"E\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Utupe leo chakula chetu\"}]},{\"chords\":[{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Tunachohitaji utusamehe\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Makosa yetu, hey!\"}]},{\"chords\":[{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Kama nasi tunavyowasamehe\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"E\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Waliotukosea usitutie\"}]},{\"chords\":[{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Katika majaribu, lakini\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Utuokoe, na yule\"}]},{\"chords\":[{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Mwovu, \"},{\"base\":\"A\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"milele!\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]}]},{\"type\":\"R\",\"isHidden\":false,\"isHiddenText\":false,\"isEmpty\":false,\"isVerse\":false,\"isRefrain\":true,\"isInline\":false,\"songLines\":[{\"chords\":[{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu uliye\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Mbinguni yetu, yetu, amina!\"}]},{\"chords\":[{\"base\":\"H\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu, uliye\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Jina lako \"},{\"base\":\"A\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"litukuzwe\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu uliye\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Mbinguni yetu, yetu, amina!\"}]},{\"chords\":[{\"base\":\"H\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu, uliye\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Jina lako \"},{\"base\":\"A\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"litukuzwe\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"E\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"F\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"B\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"Ab\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]}]},{\"type\":\"B\",\"isHidden\":false,\"isHiddenText\":false,\"isEmpty\":false,\"isVerse\":false,\"isRefrain\":false,\"isInline\":false,\"songLines\":[{\"chords\":[{\"base\":\"C#\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Ufalme \"},{\"base\":\"A\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"wako u\"},{\"base\":\"E\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"fike uta\"},{\"base\":\"H\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"kalo\"}]},{\"chords\":[{\"base\":\"C#\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Lifa\"},{\"base\":\"H\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":true,\"isDivided\":false,\"text\":\"nyike \"},{\"base\":\"A\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"duniani \"},{\"base\":\"E\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"kama mbin\"},{\"base\":\"H\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"guni. (Amina)\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"A\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"C#\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"A\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"C#\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"A\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"H\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]}]},{\"type\":\"R\",\"isHidden\":false,\"isHiddenText\":false,\"isEmpty\":false,\"isVerse\":false,\"isRefrain\":true,\"isInline\":false,\"songLines\":[{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu uliye\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Mbinguni yetu, yetu, amina!\"}]},{\"chords\":[{\"base\":\"E\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu, uliye\"}]},{\"chords\":[{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Jina lako \"},{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"litukuzwe\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu uliye\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Mbinguni yetu, yetu, amina!\"}]},{\"chords\":[{\"base\":\"E\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Baba yetu, yetu, uliye\"}]},{\"chords\":[{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Jina lako \"},{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"litukuzwe\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]}]},{\"type\":\"1\",\"isHidden\":false,\"isHiddenText\":false,\"isEmpty\":false,\"isVerse\":true,\"isRefrain\":false,\"isInline\":false,\"songLines\":[{\"chords\":[{\"base\":\"E\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Utupe leo chakula chetu\"}]},{\"chords\":[{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Tunachohitaji utusamehe\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Makosa yetu, hey!\"}]},{\"chords\":[{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Kama nasi tunavyowasamehe\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"E\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Waliotukosea usitutie\"}]},{\"chords\":[{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Katika majaribu, lakini\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"Utuokoe, na yule\"}]},{\"chords\":[{\"base\":\"D\",\"variant\":\"\",\"extension\":\"4\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Mwovu, \"},{\"base\":\"D\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"milele!\"}]},{\"chords\":[{\"base\":\"\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Baba yetu, \"},{\"base\":\"G\",\"variant\":\"\",\"extension\":\"7\",\"bass\":\"H\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"yetu, uliye\"},{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"C\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]},{\"chords\":[{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"Jina lako \"},{\"base\":\"G\",\"variant\":\"\",\"extension\":\"7\",\"bass\":\"H\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":true,\"text\":\"litukuzwe\"},{\"base\":\"C\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"C\",\"variant\":\"m\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\" \"},{\"base\":\"G\",\"variant\":\"\",\"extension\":\"\",\"bass\":\"\",\"isSubstitute\":false,\"isOptional\":false,\"isDivided\":false,\"text\":\"\"}]}]}]"
        }
    },

    methods: {        
        getSongPartSharpness,
        // return data for transposed chord
        transposed: function(chord, songPartSharpness) {
            return transposedChord(chord, this.transposition, {
                useFlatScale: songPartSharpness == -1,
                forceB: false,
                useAmericanNotation: false
            });
        },

        isSongLineNewline({songLine}) {
            return songLine.chords.length == 1 && songLine.chords[0].base + songLine.chords[0].text;
        },

        getSongPartTag({part}) {
            return part.type + (part.type ? (part.isVerse ? '.' : ':') : '');
        }
    },

    computed: {
        json() {
            return JSON.parse(this.json_str);
        }
    }
}
</script>